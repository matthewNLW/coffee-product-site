(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const l={motion:{parallax:.08},thresholds:{reveal:.15,active:.5},timings:{introStart:700,introText:1e3,introScroll:1400}},c={pressure:{current:0},isTouch:"ontouchstart"in window||navigator.maxTouchPoints>0,prefersReducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,activeProduct:null},n={html:document.documentElement,header:document.querySelector(".site-header"),heroStatement:document.querySelector(".hero-statement"),heroSubtext:document.querySelector(".hero-subtext"),scrollIndicator:document.querySelector(".scroll-indicator"),productSections:document.querySelectorAll("[data-product]"),revealElements:document.querySelectorAll("[data-reveal]"),navToggle:document.querySelector(".mobile-nav-toggle"),navMenu:document.querySelector(".main-nav"),cursorGlow:document.querySelector(".cursor-glow"),magneticElements:document.querySelectorAll("[data-magnetic]"),scrollProgress:document.querySelector(".scroll-progress")},m=(t,e,o)=>t+(e-t)*o,d=(t,e,o)=>Math.min(Math.max(t,e),o);function b(){if(c.prefersReducedMotion){document.documentElement.classList.add("is-loaded"),n.header&&(n.header.style.opacity="1");return}setTimeout(()=>{n.header&&n.header.classList.add("is-visible"),document.documentElement.classList.add("intro-step-1")},l.timings.introStart),setTimeout(()=>{n.heroStatement&&n.heroStatement.classList.add("is-visible"),n.heroSubtext&&n.heroSubtext.classList.add("is-visible"),document.documentElement.classList.add("intro-step-2")},l.timings.introText),setTimeout(()=>{n.scrollIndicator&&n.scrollIndicator.classList.add("is-visible")},l.timings.introScroll)}function x(){if(c.prefersReducedMotion){n.revealElements.forEach(e=>e.classList.add("is-visible"));return}const t=new IntersectionObserver(e=>{e.forEach(o=>{if(o.isIntersecting){const s=o.target;s.classList.add("is-visible"),t.unobserve(s)}})},{threshold:l.thresholds.reveal,rootMargin:"0px 0px -50px 0px"});n.revealElements.forEach(e=>t.observe(e))}function S(){const t=new IntersectionObserver(e=>{e.forEach(o=>{if(o.isIntersecting){const s=o.target,r=s.dataset.product;if(n.productSections.forEach(i=>i.classList.remove("is-active")),s.classList.add("is-active"),c.activeProduct!==r&&(c.activeProduct=r,document.body.dataset.activeProduct=r,r)){const i=r.replace("-"," ").toUpperCase();document.title.includes(i)}}})},{threshold:l.thresholds.active});n.productSections.forEach(e=>t.observe(e))}function w(){const t=document.querySelector(".site-footer");if(!t)return;new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting?document.body.classList.add("is-footer-visible"):document.body.classList.remove("is-footer-visible")})},{threshold:.2}).observe(t)}let p=window.scrollY,u=0,f=0,h=0,g=0;function E(t){h=t.clientX,g=t.clientY,!c.isTouch&&!c.prefersReducedMotion&&n.productSections.forEach(e=>{const o=e.getBoundingClientRect();if(o.top<window.innerHeight&&o.bottom>0){const s=(t.clientX-o.left)/o.width,r=(t.clientY-o.top)/o.height;e.style.setProperty("--mx",s.toFixed(3)),e.style.setProperty("--my",r.toFixed(3))}})}function M(){c.prefersReducedMotion||c.isTouch||n.productSections.forEach(t=>{if(!t.classList.contains("is-active"))return;const e=t.getBoundingClientRect(),o=window.innerHeight/2,r=e.top+e.height/2-o,i=d(r*l.motion.parallax,-50,50),a=d(r*(l.motion.parallax*1.5),-80,80);t.style.setProperty("--p-hero-y",`${i.toFixed(2)}px`),t.style.setProperty("--p-media-y",`${a.toFixed(2)}px`)})}function L(){if(!n.cursorGlow||c.isTouch||c.prefersReducedMotion)return;u=m(u,h,.15),f=m(f,g,.15);const t=Math.abs(h-u),e=Math.abs(g-f),o=Math.min(t+e,50);n.cursorGlow.style.setProperty("--cx",`${u.toFixed(1)}px`),n.cursorGlow.style.setProperty("--cy",`${f.toFixed(1)}px`),n.cursorGlow.style.setProperty("--cv",`${o.toFixed(1)}`)}function P(){var o,s;const t=document.body.scrollHeight-window.innerHeight,e=d(p/t,0,1);document.body.style.setProperty("--scroll-progress",e.toFixed(4)),p>100?(o=n.header)==null||o.classList.add("is-scrolled"):(s=n.header)==null||s.classList.remove("is-scrolled")}function q(){if(c.prefersReducedMotion)return;const t=document.querySelector('[data-product="stonewave"]');if(!t)return;const e=t.getBoundingClientRect(),o=window.innerHeight;if(e.top<o&&e.bottom>0){const s=1-e.bottom/(e.height+o),r=Math.sin(d(s,0,1)*Math.PI),i=s*360;t.style.setProperty("--burr-opacity",r.toFixed(3)),t.style.setProperty("--burr-rotate",`${i.toFixed(1)}deg`)}}function T(){if(c.prefersReducedMotion)return;const t=document.querySelector('[data-product="mariner-9"]');if(!t)return;const e=t.getBoundingClientRect(),o=window.innerHeight;let s=0;if(e.top<o&&e.bottom>0){const r=1-e.bottom/(e.height+o);s=d(r,0,1)}c.pressure.current=m(c.pressure.current,s,.03),t.style.setProperty("--pressure-level",c.pressure.current.toFixed(4))}function y(){p=window.scrollY,M(),L(),q(),T(),P(),requestAnimationFrame(y)}function F(){c.isTouch||c.prefersReducedMotion||n.magneticElements.length===0||n.magneticElements.forEach(t=>{t.addEventListener("mousemove",e=>{const o=t.getBoundingClientRect(),s=e.clientX-(o.left+o.width/2),r=e.clientY-(o.top+o.height/2);t.style.transform=`translate(${s*.3}px, ${r*.3}px)`}),t.addEventListener("mouseleave",()=>{t.style.transform="translate(0px, 0px)"})})}function R(){if(!n.navToggle||!n.navMenu)return;const t=n.navMenu.querySelectorAll("a[href], button"),e=t[0],o=t[t.length-1];function s(){const r=n.navToggle.getAttribute("aria-expanded")==="true";n.navToggle.setAttribute("aria-expanded",!r),n.html.classList.toggle("nav-open"),r?(document.body.style.overflow="",n.navToggle.focus()):(c.lastScrollPosition=window.scrollY,document.body.style.overflow="hidden",setTimeout(()=>e==null?void 0:e.focus(),100))}n.navToggle.addEventListener("click",s),n.navMenu.querySelectorAll("a").forEach(r=>{r.addEventListener("click",()=>{n.navToggle.getAttribute("aria-expanded")==="true"&&s()})}),n.navMenu.addEventListener("keydown",r=>{r.key==="Tab"?r.shiftKey?document.activeElement===e&&(r.preventDefault(),o.focus()):document.activeElement===o&&(r.preventDefault(),e.focus()):r.key==="Escape"&&s()})}function I(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(e){const o=this.getAttribute("href");if(o==="#")return;const s=document.querySelector(o);s&&(e.preventDefault(),s.scrollIntoView({behavior:c.prefersReducedMotion?"auto":"smooth"}))})})}function v(){b(),x(),S(),R(),F(),I(),w(),window.addEventListener("mousemove",E,{passive:!0}),requestAnimationFrame(y),console.log("Tide & Grind: Exhibition initialized.")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();
